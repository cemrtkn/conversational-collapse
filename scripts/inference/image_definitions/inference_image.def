BootStrap: docker
From: python:3.14.2-slim-bookworm

%files
$HOME/conversational-collapse/src /opt/conversational-collapse/src
$HOME/conversational-collapse/pyproject.toml /opt/conversational-collapse/pyproject.toml
$HOME/conversational-collapse/README.md /opt/conversational-collapse/README.md

%post
# Install build dependencies
apt-get update && apt-get install -y --no-install-recommends \
    build-essential git curl \
    && rm -rf /var/lib/apt/lists/*

# Upgrade pip and install Python deps
pip install --upgrade pip

# Install the project in editable mode
pip install -e /opt/conversational-collapse

%help
  A Python 3.14 image for testing conversational collapse in LLMs.

%test
python -c "import torch; print(f'torch: {torch.__version__}')"
python -c "import pandas; print(f'pandas: {pandas.__version__}')"
python -c "import nnsight; print(f'nnsight: {nnsight.__version__}')"
python -c "from babel_ai import agent; print('Project imported successfully')"