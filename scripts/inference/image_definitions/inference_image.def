BootStrap: docker
From: python:3.14.2-slim-bookworm

%files
$HOME/conversational-collapse/scripts/inference/image_definitions/requirements.txt /opt/requirements.txt

%post
# Install build dependencies
apt-get update && apt-get install -y --no-install-recommends \
    build-essential git curl \
    && rm -rf /var/lib/apt/lists/*

# Upgrade pip and install Python deps
pip install --upgrade pip

# Install the project in editable mode
pip install -r /opt/requirements.txt

%help
  Base image for conversational-collapse package to be built upon

%test
python -c "import torch; print(f'torch: {torch.__version__}')"
python -c "import pandas; print(f'pandas: {pandas.__version__}')"
python -c "import nnsight; print(f'nnsight: {nnsight.__version__}')"